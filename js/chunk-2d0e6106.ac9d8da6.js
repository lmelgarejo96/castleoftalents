(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6106"],{"96c6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-fluid",staticStyle:{background:"#e3e5eb"},attrs:{id:"home-component"}},[r("div",{staticClass:"row",staticStyle:{background:"#e3e5eb"}},[r("div",{staticClass:"col-lg-12 pt-0"},[r("div",{staticClass:"card w-100"},[r("div",{staticClass:"container mt-3"},[r("h5",[e._v("Nuevo Alumno")]),r("hr"),r("v-form",{ref:"form",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.saveAlumno(t)}},model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12"},[r("div",{staticClass:"overline"},[e._v("DATOS DEL ALUMNO")])]),r("div",{staticClass:"col-lg-6 col-md-12 col-sm-12"},[r("v-text-field",{attrs:{outlined:"",id:"dni-cdt",label:"DNI *"},on:{keyup:function(t){return e.consultarDNI("hijo")}},model:{value:e.user.dni,callback:function(t){e.$set(e.user,"dni",t)},expression:"user.dni"}}),r("v-text-field",{attrs:{outlined:"",label:"Nombre *"},model:{value:e.user.nombres,callback:function(t){e.$set(e.user,"nombres",t)},expression:"user.nombres"}}),r("v-text-field",{attrs:{outlined:"",label:"Apellido Paterno *"},model:{value:e.user.apellido_paterno,callback:function(t){e.$set(e.user,"apellido_paterno",t)},expression:"user.apellido_paterno"}}),r("v-text-field",{attrs:{outlined:"",label:"Apellido Materno *"},model:{value:e.user.apellido_materno,callback:function(t){e.$set(e.user,"apellido_materno",t)},expression:"user.apellido_materno"}}),r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition *","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{outlined:"",label:"Fecha de Nacimiento *",readonly:""},model:{value:e.user.fecha_nacimiento,callback:function(t){e.$set(e.user,"fecha_nacimiento",t)},expression:"user.fecha_nacimiento"}},a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{ref:"picker",attrs:{max:(new Date).toISOString().substr(0,10),min:"1950-01-01"},on:{change:e.saveDate},model:{value:e.user.fecha_nacimiento,callback:function(t){e.$set(e.user,"fecha_nacimiento",t)},expression:"user.fecha_nacimiento"}})],1),r("v-text-field",{attrs:{outlined:"",label:"Domicilio *"},model:{value:e.user.direccion,callback:function(t){e.$set(e.user,"direccion",t)},expression:"user.direccion"}}),r("v-text-field",{attrs:{outlined:"",label:"Telefono Casa *"},model:{value:e.user.telefono,callback:function(t){e.$set(e.user,"telefono",t)},expression:"user.telefono"}})],1),r("div",{staticClass:"col-lg-6 col-md-12 col-sm-12"},[r("v-combobox",{attrs:{outlined:"",items:e.basecolegio.niveles,label:"Nivel *"},on:{change:e.updateListGrados},model:{value:e.user.nivel,callback:function(t){e.$set(e.user,"nivel",t)},expression:"user.nivel"}}),r("v-combobox",{attrs:{outlined:"",items:e.grados,label:"Grado *"},model:{value:e.user.grado,callback:function(t){e.$set(e.user,"grado",t)},expression:"user.grado"}}),r("v-file-input",{attrs:{rules:e.rules,accept:"image/png, image/jpeg, image/bmp, image/jpg",placeholder:"Click aqui para elegir una imagen..","prepend-icon":"","prepend-inner-icon":"mdi-camera",label:"Imagen",id:"photoInput",outlined:"",loading:e.loadingImage},on:{change:function(t){return e.updatePreview()}},model:{value:e.user.imagen,callback:function(t){e.$set(e.user,"imagen",t)},expression:"user.imagen"}}),r("div",{staticClass:"card w-100 mx-auto d-flex flex-column flex-nowrap align-items-center justify-content-center",staticStyle:{border:"none"}},[r("img",{staticClass:"img-fluid",staticStyle:{"max-height":"340px","max-width":"340px",cursor:"pointer","border-radius":"50%"},attrs:{id:"img-preview",src:a("afa5"),alt:"img-preview"},on:{click:e.openFI}})])],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12"},[r("div",{staticClass:"overline"},[e._v("DATOS DEL APODERADO")])]),r("div",{staticClass:"col-lg-6 col-md-12 col-sm-12"},[r("v-text-field",{attrs:{outlined:"",label:"DNI",required:""},on:{keyup:function(t){return e.consultarDNI("padre")}},model:{value:e.user.pariente.dni,callback:function(t){e.$set(e.user.pariente,"dni",t)},expression:"user.pariente.dni"}}),r("v-text-field",{attrs:{outlined:"",label:"Nombres",required:""},model:{value:e.user.pariente.nombres,callback:function(t){e.$set(e.user.pariente,"nombres",t)},expression:"user.pariente.nombres"}}),r("v-text-field",{attrs:{outlined:"",label:"Apellido Paterno",required:""},model:{value:e.user.pariente.apellido_paterno,callback:function(t){e.$set(e.user.pariente,"apellido_paterno",t)},expression:"user.pariente.apellido_paterno"}}),r("v-text-field",{attrs:{outlined:"",label:"Apellido Materno",required:""},model:{value:e.user.pariente.apellido_materno,callback:function(t){e.$set(e.user.pariente,"apellido_materno",t)},expression:"user.pariente.apellido_materno"}})],1),r("div",{staticClass:"col-lg-6 col-md-12 col-sm-12"},[r("v-text-field",{attrs:{outlined:"",label:"Domicilio",required:""},model:{value:e.user.pariente.direccion,callback:function(t){e.$set(e.user.pariente,"direccion",t)},expression:"user.pariente.direccion"}}),r("v-text-field",{attrs:{rules:e.emailRules,outlined:"",label:"E-mail",required:""},model:{value:e.user.pariente.correo,callback:function(t){e.$set(e.user.pariente,"correo",t)},expression:"user.pariente.correo"}}),r("v-text-field",{attrs:{outlined:"",label:"Telefono",required:""},model:{value:e.user.pariente.telefono,callback:function(t){e.$set(e.user.pariente,"telefono",t)},expression:"user.pariente.telefono"}}),r("v-text-field",{attrs:{outlined:"",label:"Celular",required:""},model:{value:e.user.pariente.celular,callback:function(t){e.$set(e.user.pariente,"celular",t)},expression:"user.pariente.celular"}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12"},[r("v-btn",{attrs:{color:"primary"},on:{click:e.saveAlumno}},[r("i",{staticClass:"ml-auto material-icons mr-2"},[e._v("save")]),e._v(" Guardar")])],1)])])],1)])])])])},i=[],n=(a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("96cf"),a("1da1")),o=a("ade3"),s=a("afa5"),l=a.n(s),c=a("bc3a"),u=a.n(c),d=a("2f62"),p=a("3d20"),m=a.n(p);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={data:function(){return{validForm:!0,tokenReniec:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6Imx1aXNtZWxnYXJlam9hbGFyY29uQGdtYWlsLmNvbSJ9.sPuL_WIleq7us1RzH1feIjWG_7NC20Jj_9LBgvpQivU",user:{nombres:"",apellido_paterno:"",apellido_materno:"",dni:"",direccion:"",fecha_nacimiento:null,edad:"",telefono:"",nivel:"",grado:"",imagen:null,password:"",rol_usuario:"alumno",pariente:{dni:"",nombres:"",apellido_paterno:"",apellido_materno:"",direccion:"",correo:"",telefono:"",celular:""}},default_user:{nombres:"",apellido_paterno:"",apellido_materno:"",dni:"",direccion:"",fecha_nacimiento:null,edad:"",telefono:"",nivel:"",grado:"",imagen:null,password:"",rol_usuario:"alumno",pariente:{dni:"",nombres:"",apellido_paterno:"",apellido_materno:"",direccion:"",correo:"",telefono:"",celular:""}},grados:"",menu:!1,loadingImage:!1,rules:[function(e){return!e||e.size<2e6||"Avatar size should be less than 2 MB!"}]}},computed:v({},Object(d["c"])(["basecolegio"])),watch:{menu:function(e){var t=this;e&&setTimeout((function(){return t.$refs.picker.activePicker="YEAR"}))}},mounted:function(){this.removeImagen(),this.$store.dispatch("getBaseColegio"),this.$store.dispatch("updateGlobalIndex")},methods:{saveDate:function(e){this.$refs.menu.save(e)},consultarDNI:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"hijo"!==t){e.next=10;break}if(!(this.user.dni.length>=8)){e.next=8;break}return a="http://dniruc.apisperu.com/api/v1/dni/",e.next=6,u.a.get(a+this.user.dni+"?token="+this.tokenReniec);case 6:r=e.sent,r.data&&(this.user.nombres=r.data.nombres,this.user.apellido_paterno=r.data.apellidoPaterno,this.user.apellido_materno=r.data.apellidoMaterno);case 8:e.next=16;break;case 10:if(!(this.user.pariente.dni.length>=8)){e.next=16;break}return i="http://dniruc.apisperu.com/api/v1/dni/",e.next=14,u.a.get(i+this.user.pariente.dni+"?token="+this.tokenReniec);case 14:n=e.sent,n.data&&(this.user.pariente.nombres=n.data.nombres,this.user.pariente.apellido_paterno=n.data.apellidoPaterno,this.user.pariente.apellido_materno=n.data.apellidoMaterno);case 16:e.next=20;break;case 18:e.prev=18,e.t0=e["catch"](0);case 20:case"end":return e.stop()}}),e,this,[[0,18]])})));function t(t){return e.apply(this,arguments)}return t}(),openFI:function(){document.getElementById("photoInput");photoInput.click()},updatePreview:function(){var e=this;try{if(void 0!==this.user.imagen){this.loadingImage=!0;var t=new FileReader;t.readAsDataURL(this.user.imagen),t.onload=function(){var a=document.getElementById("img-preview");a.src=t.result,e.loadingImage=!1}}else this.removeImagen()}catch(a){throw a}},removeImagen:function(){document.getElementById("img-preview").src=l.a,this.user.image=void 0},updateListGrados:function(){var e=this;try{var t=[],a=this.basecolegio.grados;a.forEach((function(a){a.nivel===e.user.nivel&&t.push(a.nombre)})),this.grados=t}catch(r){return}},saveAlumno:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.verificaCampos()){e.next=12;break}return this.user.password=this.user.dni,t=new FormData,a=JSON.stringify(this.user),t.append("image",this.user.imagen),t.append("user",a),e.next=8,this.$store.dispatch("addAlumno",t);case 8:r=e.sent,r&&(this.removeImagen(),this.user={},this.user=this.default_user,this.user.imagen=null,this.$router.push("/app1/aintranet/alumnos")),e.next=13;break;case 12:m.a.fire("Datos insuficientes","Debes rellenar como mínimo todos los campos obligatorios que contienen (*)","error");case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),verificaCampos:function(){return""!==this.user.nombres&&""!==this.user.apellido_paterno&&""!==this.user.apellido_materno&&""!==this.user.dni&&""!==this.user.direccion&&""!==this.user.fecha_nacimiento&&""!==this.user.dni}}},h=b,g=a("2877"),x=a("6544"),k=a.n(x),_=a("8336"),w=a("2b5d"),y=a("2e4b"),I=a("23a7"),O=a("4bd4"),C=a("e449"),D=a("8654"),$=Object(g["a"])(h,r,i,!1,null,null,null);t["default"]=$.exports;k()($,{VBtn:_["a"],VCombobox:w["a"],VDatePicker:y["a"],VFileInput:I["a"],VForm:O["a"],VMenu:C["a"],VTextField:D["a"]})}}]);
//# sourceMappingURL=chunk-2d0e6106.ac9d8da6.js.map